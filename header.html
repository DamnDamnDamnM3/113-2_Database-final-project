<div class="header">
    <a href="/" class="logo-title">
        <img src="/pics/iecs_logo.png" alt="系徽" />
        逢甲資訊工程學系
    </a>
    <div class="nav">
        <a class="nav-item" href="/about">系所簡介</a>
        <a class="nav-item" href="/contact">聯絡我們</a>
        <div class="members-container">
            <a class="nav-item members" href="/members">系所成員</a>
            <div class="dropdown">
                <a href="/members/chairman">系主任</a>
                <a href="/members/honorary">榮譽特聘教授</a>
                <a href="/members/chair">講座教授</a>
                <a href="/members/distinguished_chair">特約教授</a>
                <a href="/members/distinguished">特聘教授</a>
                <a href="/members/full_time">專任教授</a>
                <a href="/members/part_time">兼任教授</a>
                <a href="/members/staff">行政人員</a>
                <a href="/members/retired">退休教授</a>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const currentPath = window.location.pathname;
  const navItems = document.querySelectorAll('.nav-item, .dropdown a');
  const membersNav = document.querySelector('.nav-item.members');

  navItems.forEach(a => {
    if (a.getAttribute('href') === currentPath) {
      a.classList.add('active');
      // dropdown 裡面選項 active，members 也 active
      if (a.closest('.dropdown')) {
        membersNav.classList.add('active');
        // 標記 members-container 本身，用來控制 hover 效果關閉
        membersNav.closest('.members-container').classList.add('active-parent');
      }
      // 如果是 members 頁面（/members 或 /members/），同樣標記
      if (a.classList.contains('members')) {
        membersNav.classList.add('active');
        membersNav.closest('.members-container').classList.add('active-parent');
      }
    }
  });

  // 當滑鼠移出 members-container，且有 active-parent 表示是目前頁面維持 active，
  // 我們用 CSS 控制是否要維持 hover 效果
});
</script>